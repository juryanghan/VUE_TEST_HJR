<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" layout:decorator="adm/layout/default">
<body>

<th:block layout:fragment="css">
    <link href='/admin/css/bootstrap-multiselect.css' rel='stylesheet' type='text/css' />
    <link href='/admin/css/bootstrap-customized.css' rel='stylesheet' type='text/css' />
    <link href='/admin/css/jquery-ui.css' rel='stylesheet' type='text/css' />
    <link href='/admin/css/datepicker.css' rel='stylesheet' type='text/css' />
    <link href='/admin/css/ui-custom.css' rel='stylesheet' type='text/css' />
    <link href='/admin/css/view/imgList.css' rel='stylesheet' type='text/css' />
    <link th:href="${#tck.getVersion('/admin/css//view/admin.css')}" rel='stylesheet' type='text/css' />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/css/select2.min.css" rel="stylesheet" />
<style>
    #myform div{
        display: inline-block;
        direction: rtl;
        border: 0;
    }
    #myform div legend{
        text-align: left;
    }
    #myform input[name=rating]{
        display: none;
    }
    #myform label{
        font-size: 1.1em;
        color: transparent;
        text-shadow: 0 0 0 #f0f0f0;
    }
    #myform label:hover{
        text-shadow: 0 0 0 #ffff00;
    }
    #myform label:hover ~ label{
        text-shadow: 0 0 0 #ffff00;
    }
    #myform input[type=checkbox]:checked ~ label{
        text-shadow: 0 0 0 #ffff00;
    }

    .list {
    /* padding: 0.5em; */
    max-width: 70em;
    margin: 0 auto;
    overflow: hidden;
    width: 100%;
    max-width: 1920px;
    padding: 0;
    margin: 0;
    clear: both;
    display: flex;
    flex-flow: row wrap;
    justify-content: space-between;
    align-content: flex-start;
}

.list li {
    width: 23%;
    margin-left: 2%;
}

.li-img, .li-text, .inner {
    display: block;
    width: auto;
    padding: 0;
}

.li-head {
    height: 100px;
    overflow: hidden;
}
.li-sub{
    margin-top: 20px;
}

.cf::after {
    content:"";
    display:block;
        clear: both;
}

</style>
</th:block>

<!-- Main Content -->

<div id="content" layout:fragment="content">

    <nav th:replace="adm/fragments/topbar :: TopbarFragment"></nav>
    <!-- Begin Page Content -->
    <div class="container-fluid">

        <!-- Page Heading -->
        <h1 class="mb-2 text-gray-800 content-title">이벤트 관리</h1>

        <form name="Searchfrm" id="Searchfrm" method="post">
            <input type="hidden" id="eventNos" name="eventNos" />
            <input type="hidden" id="like" name="like" />
            <input type="hidden" id="currentPageNo" name="currentPageNo" />
            <div class="row" id="SearchRow">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary" style="display: inline;">
                                <span class="txt-info">검색</span>
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="con_search_form">
                                <table class="table table-bordered" summary="이벤트 참여자 검색">
                                    <colgroup>
                                        <col style="width: 15%;">
                                        <col style="width: 35%;">
                                        <col style="width: 15%;">
                                        <col style="width: 35%;">
                                    </colgroup>
                                    <tr>
                                        <th>
                                            편의점 본사
                                        </th>
                                        <td>
                                            <select name="searchStore" id="searchStore" class="form-control" style="width: 200px;">
                                                <option value="">선택</option>
                                                <option value="세븐일레븐">세븐일레븐</option>
                                                <option value="CU">CU</option>
                                                <option value="GS">GS</option>
                                            </select>
                                        </td>
                                        <th>점포명 </th>
                                        <td>
                                            <select class="js-example-placeholder-single js-states form-control" id="searchConvenienceStoreName" name="searchConvenienceStoreName">
                                                <option value="">선택해주세요.</option>
                                                <th:block th:each="list : ${convenienceStoreParam}">
                                                    <option th:value="${list.convenienceStoreName}" th:text="${list.convenienceStoreName}"></option>
                                                </th:block>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>전화번호</th>
                                        <td>
                                            <input type="text" id="searchTelNum" name="searchTelNum" class="form-control" style="width: 335px;" />
                                        </td>
                                        <th>이름</th>
                                        <td>
                                            <input type="text" id="searchCustName" name="searchCustName" class="form-control" style="width: 335px;" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>추천인</th>
                                        <td>
                                            <input type="text" id="searchRecommendedName" name="searchRecommendedName" class="form-control" style="width: 335px;" />
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-lg-12" style="text-align: center;">
                                <button type="button" class="btn btn-sm btn-primary" onClick="TckJS.PageUtil.goSearch(); return false;">검색</button>
                                <button type="button" class="btn btn-sm btn-danger" onClick="TckJS.PageUtil.ReSetSearch(); return false;">초기화</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>

        <!--Pattern HTML-->
        <div id="pattern" class="pattern">
            <a href="/adm/admin/event">리스트 정렬</a>
            <ul class="list img-list">
                <th:block th:each="list,data : ${listData}">
                <li>
                        <div class="li-img">
<!--                            <img class="img-fluid px-3 px-sm-4 mt-3 mb-4 imgC" style="width: 25rem;" th:src="${list.imageUrl}" th:alt="${list.originName}">-->
                            <img class="img-fluid px-3 px-sm-4 mt-3 mb-4 imgC" id="imgC" name="ImageList" style="width: 25rem;" th:src="${list.imageUrl}" th:alt="${list.originName}" th:data-event_no="${list.eventNo}">
                        </div>
                        <div class="li-text">
                            <h4 class="li-head" th:text="|${list.getName()}/${list.convenienceStoreName}|"></h4>
                            <p class="li-sub" th:text="${list.originName}"></p>
                            <div name="myform" id="myform">
                                <div>
                                    <input type="checkbox" class="selectImg" name='selectImg' th:value="${list.eventNo}">
                                    <input type="checkbox" name="rating" th:value="${list.like}" id="rate5" th:attr="checked=${list.like  == 5 ? 'true' : 'false'}"><label for="rate5" th:onclick="Like([[${list.eventNo}]],5)">⭐</label>
                                    <input type="checkbox" name="rating" th:value="${list.like}" id="rate4" th:attr="checked=${list.like  == 4 ? 'true' : 'false'}"><label for="rate4" th:onclick="Like([[${list.eventNo}]],4)">⭐</label>
                                    <input type="checkbox" name="rating" th:value="${list.like}" id="rate3" th:attr="checked=${list.like  == 3 ? 'true' : 'false'}"><label for="rate3" th:onclick="Like([[${list.eventNo}]],3)">⭐</label>
                                    <input type="checkbox" name="rating" th:value="${list.like}" id="rate2" th:attr="checked=${list.like  == 2 ? 'true' : 'false'}"><label for="rate2" th:onclick="Like([[${list.eventNo}]],2)">⭐</label>
                                    <input type="checkbox" name="rating" th:value="${list.like}"id="rate1"  th:attr="checked=${list.like  == 1 ? 'true' : 'false'}"><label for="rate1" th:onclick="Like([[${list.eventNo}]],1)">⭐</label>
                                </div>
                            </div>
                        </div>
                </li>
                </th:block>
                <li th:if="${paginationInfo.totalRecordCount == 0}">
                    <a id="listEmpty" colspan="4">데이터가 없습니다.</a>
                </li>
            </ul>
            <button type="button" class="btn btn-sm btn-primary" th:onclick="EventBoardJS.ExcelDownAll()" style="float: right;margin-left: 5px;">다운로드(전체)</button>
            <button type="button" class="btn btn-sm btn-info" th:onclick="EventBoardJS.ExcelDown()" style="float: right;">다운로드</button>
        </div>
        <!--End Pattern HTML-->
                <!--pagination-->
                <div style="overflow-x: auto;">
                    <div class="dataTables_paginate paging_simple_numbers" id="dataTable_paginate" style="margin-right: 5px; padding-left: 50%;">
                        <ul class="pagination bootpag" th:utext="*{#paginationInfo.renderPagination(paginationInfo,'TckJS.PageUtil.goPage')}"></ul>
                    </div>
                </div>
                <!--//pagination-->
            </div>
        </div>
    </div>
</div>
<!-- End of Main Content -->

<div layout:fragment="modal">
    <!-- 팝업 될 곳 -->
    <div class="modal" id="img_modal" style="top:25%; left:50%; width: auto; ">
        <button>&times;</button>
        <div class="modalBox">
            <img src="" alt="">
            <p></p>
        </div>
    </div>
    <!-- 끝-->
</div>
<th:block layout:fragment="script">
    <script th:src="${#tck.getVersion('/admin/js/view/event_board.js')}"></script>
    <script th:src="${#tck.getVersion('/admin/js/tck/excel_util.js')}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/js/select2.min.js"></script>
    <script>


		/*<![CDATA[*/
        var setData = []
		setData.push({ formID : "Searchfrm" ,targatID : "currentPageNo", val : "[[ ${param.currentPageNo} ]]" });
		setData.push({ formID : "Searchfrm" ,targatID : "searchKeyword", val : "[[ ${param.searchKeyword} ]]" });

		$(document).ready(function() {
			TckJS.Util.AlertMode = "layer";
			EventBoardJS.init();
			TckJS.PageUtil.init(setData,null);
			TckJS.PageUtil.EnterSubmit("#searchKeyword","#Searchfrm");

		$(".js-example-placeholder-single").select2({
            placeholder: "선택해주세요.",
            allowClear: true

		});


		});


		function Like(eventNo,like){
            $("#Searchfrm").find("#like").val(like);
             TckJS.Ajax.postAjaxLoding("/adm/admin/ajax/like", {eventNo:eventNo , like:like}, function (res) {
                 location.reload();
             });
		}


		/*]]>*/
	</script>
</th:block>
</body>
</html>